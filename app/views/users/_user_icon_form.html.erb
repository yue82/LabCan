<span class="picture">
  <%= form_for(@user, html: { multipart: true }) do |f| %>
    <%= f.label "Icon Image" %>
    <%= f.file_field :temp_icon, accept: 'image/jpeg,image/gif,image/png' %>
  <% end %>
</span>

<script type="text/javascript">
 $('#user_temp_icon').bind('change', function() {
   var size_in_megabytes = this.files[0].size/1024/1024;
   if (size_in_megabytes > 5) {
     alert('Maximum file size is 5MB. Please choose a smaller file.');
   }
 });
</script>

<script>
 $("#user_temp_icon").fileinput({
   showClose: false,
   showCaption: false,
   previewFileType: "image",
   browseClass: "btn btn-success fi-browse-btn",
   browseLabel: "New Icon",
   browseIcon: "<i class=\"glyphicon glyphicon-picture\"></i> ",
   removeClass: "btn btn-danger fi-delete-btn",
   removeLabel: "Reset",
   removeIcon: "<i class=\"glyphicon glyphicon-trash\"></i> ",
   uploadClass: "btn btn-info fi-upload-btn",
   uploadLabel: "Edit",
   uploadIcon: "<i class=\"glyphicon glyphicon-upload\"></i> ",
   defaultPreviewContent: '<%= image_tag icon_for(@user), size: '160' %>',
   allowedFileExtensions: ['jpg', 'jpeg', 'png', 'gif']
 });
</script>
